<div ng-controller="MyImpactController as impactCtrl" class="appeal-page">
  <section class="splash-v3 grad-both">
    <div class="header-image"
         ng-style="{ 'background' : 'linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0)), url(' + impactCtrl.project.img + ') no-repeat center' }">
      <div class="container my-impact__splash_container splash-v3__container-title">
        <div class="row">
          <h3 id="my-impact-project-title">{{ impactCtrl.project.title }}</h3>
        </div>
        <div class="row ">
          <div ng-hide="impactCtrl.project.status == 'FINISHED'"  class=" col-md-4 splash-v3__progress-section">
             <p class="my-impact__progress-title">'We need to raise'</p>
             <span class="my-impact__progress-value">{{ impactCtrl.project.fundingTarget | money}}</span>
           </div>
           <div class="col-md-4 splash-v3__progress-section">
             <p class="my-impact__progress-title">{{impactCtrl.project.status == "FINISHED" ? 'Raised' : 'Raised so far'}}</p>
             <span class="my-impact__progress-value">{{ impactCtrl.project.donatedByAll | money}}</span>
           </div>
           <div class="col-md-4 splash-v3__progress-section">
            <p ng-if="impactCtrl.project.unitsHelped > 0" class="my-impact__progress-title">Helped</p>
            <p ng-if="impactCtrl.project.unitsHelped == 0" class="my-impact__progress-title">To help</p>
            <span class="my-impact__progress-value">
              <span ng-if="impactCtrl.project.unitsHelped > 0">{{ impactCtrl.project.unitsHelped }}/</span>
              <span>{{ impactCtrl.project.totalUnitsToHelp }}</span>
              <span class="my-impact__units">
                {{ impactCtrl.project.typeOfBeneficiary }}
              </span>
            </span>
          </div>
        </div>
        <div class="row">
          <div ng-show="impactCtrl.project.status == 'FINISHED'" class="col-md-10 col-xs-10 no-padding"
               style="margin-top: 30px;" >
            <div class="row">
              <div class="col-md-6">
                <p>Run by</p>
                <div class="appeal-v3__info-image"
                     style="margin-bottom: -150px; background-image: url('{{impactCtrl.project.charity.picture}}')">
                </div>
              </div>
              <div class="col-md-6" style="padding-top: 10px;">
              <a href="/project/{{impactCtrl.project.code}}/4">
                <button class="inverse-button my-impact__show-appeal-button">
                  <i class="glyphicon glyphicon-chevron-right"></i>
                  VIEW REPORT
                </button>
              </a>
              </div>
            </div>
          </div>

          <div ng-hide="impactCtrl.project.status == 'FINISHED'" class="col-md-6 col-xs-10 no-padding">
            <a href="/project/{{impactCtrl.project.code}}/4">
              <button class="inverse-button my-impact__show-appeal-button">
                <i class="glyphicon glyphicon-chevron-right"></i>
                VIEW APPEAL PAGE
              </button>
            </a>
          </div>

        </div>
      </div>
    </div>
  </section>

  <section class="container my-impact__container">
    <div class="row my-impact__container-greeting">
      <div class="col-xs-12 col-md-12 col-lg-12">
        <h3 class="alice-dark-grey goals-dash__greeting">
          Hi {{ impactCtrl.loggedUser.firstName }}
        </h3>
      </div>
      <div class="col-xs-12 col-md-12 col-lg-12 my-impact__overview">
        <div class="my-impact__overview-section col-md-4 col-sm-6 col-xs-12">
          <p>You donated</p>
          <h3 class="alice-blue">{{ impactCtrl.project.totalDonated | money }}</h3>
        </div>
        <div ng-if="impactCtrl.project.totalPaidOut > 0" class="my-impact__overview-section col-md-4 col-sm-6 col-xs-12">
          <p>{{ impactCtrl.charity.name }} used</p>
          <h3 class="alice-blue">{{ impactCtrl.project.totalPaidOut | money }}</h3>
          <p>so far</p>
        </div>
        <div ng-if="impactCtrl.project.unitsHelpedWithUserDonations > 0" class="my-impact__overview-section col-md-4 col-sm-6 col-xs-12">
          <p>To help</p>
          <h3 class="alice-blue">
            {{impactCtrl.project.peopleHelped}}
          </h3>
          <p>{{ impactCtrl.project.typeOfBeneficiary }}</p>
        </div>
      </div>
    </div>

    <div class="row my-impact__container-boost-donation">
      <div class="col-md-4 col-xs-10">
        <button ng-click="impactCtrl.boostDonation()" class="my-impact__boost-donation-button">
          <i class="glyphicon glyphicon-chevron-right"></i>
          BOOST YOUR DONATION
        </button>
      </div>
    </div>

    <!-- Goals -->
    <div class="my-impact__container-goals">
      <h5 class="alice-dark-grey">TRACK IMPACT THROUGH {{ impactCtrl.project.outcomes.length }} GOALS </h5>
      <!-- <a href="">
          <i class="fa fa-chevron-circle-left"
             style="position: absolute; color: #1CB8C4; margin-top: 230px; z-index: 100; font-size: 20px"
             ng-click="impactCtrl.scrollGoal('left')">
          </i>
        </a>
        <a href="">
          <i class="fa fa-chevron-circle-right"
             style="position: absolute; color: #1CB8C4; right: -10px; margin-top: 230px; z-index: 100; font-size: 20px"
             ng-click="impactCtrl.scrollGoal('right')">
          </i>
        </a> -->
        <div class="row">
          <div ng-repeat="outcome in impactCtrl.project.outcomes" index="$index">
            <my-impact-goal goal="outcome" index="$index"></my-impact-goal>
          </div>
        </div>


    </div>
  </section>

  <alice-footer></alice-footer>
</div>
