<div ng-controller="ProjectControllerV2 as projectCtrl" class="appeal-page">
  <section class="splash-v3 grad-both">
    <div class="header-image"
         ng-style="{ 'background' : 'linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)), url(' + projectCtrl.model.img + ') no-repeat center' }">
      <div class="container splash-v3__container-title">
        <div class="row">
          <h3>{{ projectCtrl.model.title }}</h3>
          <a href="/how-it-works/">Track your donation's impact <i class="glyphicon glyphicon-chevron-right"></i></a>
        </div>
        <div class="row splash-v3__container-progress">
           <p class=" col-md-6 splash-v3__progress-section">We need to raise<br>
             <span style="font-size: 22px;">{{ projectCtrl.model.fundingTarget | money}}</span>
           </p>
           <p class=" col-md-5 splash-v3__progress-section">To complete<br>
             <span style="font-size: 22px;">{{ projectCtrl.model._outcomes.length }}</span> goals
           </p>
        </div>
        <div class="row">
          <a ng-click="projectCtrl.donate()">
            <button>
              <i class="white glyphicon glyphicon-chevron-right" style="transform: translateY(1px); margin-left: -10px"></i>
              DONATE
            </button>
          </a>
        </div>
      </div>
    </div>
  </section>

  <section class="container appeal-v3__container">
    <div class="appeal-v3__info">
      <div class="col-xs-12 col-md-12 col-lg-12 appeal-v3__info-top">
        <div class="col-md-8 appeal-v3__info-left">
          <h3 class="col-xs-12 col-md-12 col-lg-12 uppercase">{{ projectCtrl.model.lead }}</h3>
          <p class="col-xs-12 col-md-12 col-lg-12"
             ng-bind-html="projectCtrl.model.summary"></p>
        </div>
        <div class="col-md-3 col-md-offset-1 appeal-v3__info-right">
          <div class="col-md-12 col-lg-12">
            <p>Run by</p>
            <div class="appeal-v3__info-image"
                 style="background-image: url('{{projectCtrl.model.charity.darkPicture}}')">
            </div>
          </div>
        </div>
      </div>
      <div class="appeal-v3__info-top-expanded col-xs-12 col-md-12 col-lg-12"
           uib-collapse="!expandSummary">
        <div class="col-md-8 appeal-v3__info-left">
          <p ng-bind-html="projectCtrl.model.extendedSummary"></p>
        </div>
      </div>
      <button class="col-md-2 col-lg-2"
              ng-click="expandSummary = !expandSummary">
        Read <span ng-if="expandSummary">Less</span><span ng-if="!expandSummary">More</span>
        <i class="pull-up glyphicon"
           ng-class="expandSummary ? 'glyphicon-chevron-up' : 'glyphicon-chevron-down'"></i>
      </button>
    </div>
    <div class="col-xs-12 col-md-12 col-lg-12 appeal-v3__goals">
      <h3 class="">
        <ng-pluralize count="projectCtrl.model._outcomes.length"
                      when="{'0': '',
                             '1': 'Track impact through 1 goal',
                             'other': 'Track impact through {} goals'}">
        </ng-pluralize>
      </h3>

      <!-- Carousel: -->
        <div class="col-md-12" style="padding: 0;">
          <div class="row-horizon" style="margin: 0;">
            <div class="appeal-v3__goals-carousel-goal col-md-4"
                 ng-repeat="goal in projectCtrl.model._outcomes">
              <div class="title-over-image">
                <img src="{{ goal.image }}"
                     alt="Image for {{ goal.title }}"
                     class="appeal-v3__goals-carousel-image"
                     style="filter: brightness(100%);"/>
              </div>

              <div class="appeal-v3__goals-carousel-content">
                <div class="col-md-12 appeal-v3__goals-carousel-title">
                  <h6 style="opacity: 0.5;">Goal {{ $index + 1 }}</h6>
                  <p>{{ goal.description }}</p>
                </div>
                <div class="col-md-12 appeal-v3__goals-carousel-bottom">
                  <div class="col-md-12"
                       style="padding: 0 20px 0 0;">
                    <p>Cost per {{ goal.unit }}</p>
                    <p style="font-weight: 600 !important; font-size: 22px !important">{{ goal.costPerUnit | money }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
    <div class="col-xs-12 col-md-12 col-lg-12 appeal-v3__stories">
      <h3 class="uppercase">Follow the story</h3>
      <div ng-repeat="story in projectCtrl.model.myStory track by $index">
        <appeal-story story="story"></appeal-story>
      </div>
    </div>
  </section>
  <alice-footer></alice-footer>
</div>
